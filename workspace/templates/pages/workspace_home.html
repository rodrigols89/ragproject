{% extends "base.html" %}

{% block title %}Workspace{% endblock %}

{% block content %}
    <div class="flex h-screen bg-gray-100">

        <!-- üß± Sidebar -->
        <aside class="w-64 bg-gray-900 text-white flex flex-col justify-between">

            <!-- Bot√£o de voltar para Home -->
            <div class="p-4 border-b border-gray-700">
                <a href="{% url 'home' %}"
                   class="block bg-gray-800 hover:bg-gray-700 text-center py-2 rounded">
                    ‚Üê Voltar √† Home
                </a>
            </div>

            <!-- Logout -->
            <div class="p-4 border-t border-gray-700">
                <a href="{% url 'logout' %}"
                   class="block text-center text-red-400 hover:text-red-300">
                   Sair
                </a>
            </div>

        </aside>

        <!-- üíº √Årea principal do Workspace -->
        <main class="flex-1 p-8 overflow-y-auto">

            <!-- Header -->
            <header class="bg-white shadow px-6 py-4">
                <h1 class="text-2xl font-semibold text-gray-800">
                    Bem-vindo, {{ request.user.username }}!
                </h1>
            </header>

            <!-- üìÅ Listagem mista de pastas e arquivos -->
            <section>
                {% if folders or files %}
                    <ul class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">

                        <!-- Pastas -->
                        {% for folder in folders %}
                            <li class="bg-white border rounded-lg p-4 hover:shadow-md transition cursor-pointer">
                                <a href="?folder={{ folder.id }}" class="block">
                                    <span class="text-gray-800 font-semibold flex items-center space-x-2">
                                        <span>üìÅ</span>
                                        <span>{{ folder.name }}</span>
                                    </span>
                                    <p class="text-xs text-gray-500">
                                        Criado em {{ folder.created_at|date:"d/m/Y H:i" }}
                                    </p>
                                </a>
                            </li>
                        {% endfor %}

                        <!-- Arquivos -->
                        {% for file in files %}
                            <li class="bg-white border rounded-lg p-4 hover:shadow-md transition">
                                <a href="{{ file.file.url }}" target="_blank" class="block">
                                    <span class="text-gray-800 font-semibold flex items-center space-x-2">
                                        <span>üìÑ</span>
                                        <span>{{ file.name }}</span>
                                    </span>
                                    <p class="text-xs text-gray-500">
                                        Enviado em {{ file.uploaded_at|date:"d/m/Y H:i" }}
                                    </p>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="pt-4 text-gray-500 italic">Nenhum item encontrado neste diret√≥rio.</p>
                {% endif %}
            </section>
        </main>

    </div>
{% endblock %}
